@{
    ViewData["Title"] = "GSB Maaş Hesaplama";
    Layout = "~/Views/Shared/_Layout.cshtml"; // Layout Kullanımı
}

@using Microsoft.AspNetCore.Http
@{
    var userAd = Context.Session.GetString("UserAd") ?? "Misafir";
    var userSoyad = Context.Session.GetString("UserSoyad") ?? "";
}

<!-- ✅ Sayfa Başlığı -->
<div class="d-flex align-items-center bg-info shadow-sm py-2 mt-2 rounded">
    <h1 class="h6 mb-0 text-white text-uppercase shadow-sm mx-3">GSB MAAŞ HESAPLAMA</h1>
    <p class="text-white mb-0 shadow-sm" style="font-size: 0.8rem;">Maaş - Tediye - İkramiye Hesaplamaları</p>
</div>

<!-- ✅ Kullanıcı Bilgisi ve Hesaplama Butonu -->
<div class="container mt-2">
    <div class="d-flex justify-content-between align-items-center bg-light rounded shadow-sm p-2">
        <h6 class="text-dark">👋 @userAd @userSoyad</h6>
        <a href="/GsbMaasHesaplama" class="btn btn-primary">Kendi Maaşını Hesapla</a>
    </div>
</div>

<!-- ✅ TABLO VERİLERİ -->
<div class="container mt-2">
    <div class="table-responsive">
        <table class="table table-bordered border-dark text-center" style="text-transform: uppercase; font-size: 11px;">
            <tr>
                <th class="table-bordered border-dark text-center bg-danger text-white" colspan="3">
                    <p class="mb-0" style="font-size: 14px;"><b>ORTALAMA ÖRNEK ELE GEÇECEK NET MAAŞLAR @ViewBag.Ikramiye</b></p>
                </th>
            </tr>
            <tr>
                <td class="table-primary table-bordered border-dark">@ViewBag.AyAdi AYI</td>
                <td class="table-success table-bordered border-dark">Büyük Şehir</td>
                <td class="table-success table-bordered border-dark">Küçük Şehir</td>
            </tr>
            <tr>
                <td class="table-info table-bordered border-dark text-start">Temizlik Görevlisi (26 GÜN)</td>
                <td><p class="rakam">@ViewBag.TemizlikBuyuk</p></td>
                <td><p class="rakam">@ViewBag.TemizlikKucuk</p></td>
            </tr>
            <tr>
                <td class="table-info table-bordered border-dark text-start">Özel Güvenlik Görevlisi (12 SAAT)</td>
                <td><p class="rakam">@ViewBag.OnIkiGuvenlikBuyuk</p></td>
                <td><p class="rakam">@ViewBag.OnIkiGuvenlikKucuk</p></td>
            </tr>
            <tr>
                <td class="table-info table-bordered border-dark text-start">Özel Güvenlik Görevlisi (8 SAAT)</td>
                <td><p class="rakam">@ViewBag.SekizGuvenlikBuyuk</p></td>
                <td><p class="rakam">@ViewBag.SekizGuvenlikKucuk</p></td>
            </tr>
            <tr>
                <td class="table-info table-bordered border-dark  text-start">İklimlendirme Görevlisi (8 SAAT)</td>
                <td><p id="iklimlendirmeBuyukSehir" class="rakam">@ViewBag.IklimlendirmeBuyuk</p></td>
                <td><p id="iklimlendirmeKucukSehir" class="rakam">@ViewBag.IklimlendirmeKucuk</p></td>
            </tr>
            <tr>
                <td class="table-info table-bordered border-dark  text-start">İklimlendirme Görevlisi (12 SAAT)</td>
                <td><p id="iklimlendirmeBuyukSehir" class="rakam">@ViewBag.IklimlendirmeBuyuk12</p></td>
                <td><p id="iklimlendirmeKucukSehir" class="rakam">@ViewBag.IklimlendirmeKucuk12</p></td>
            </tr>
            <tr>
                <td class="table-info table-bordered border-dark  text-start">Bakım Onarım - Teknisyen (26 GÜN)</td>
                <td><p id="teknisyenBuyukSehir" class="rakam">@ViewBag.TeknisyenBuyuk</p></td>
                <td><p id="teknisyenKucukSehir" class="rakam">@ViewBag.TeknisyenKucuk</p></td>
            </tr>
        </table>
    </div>
</div>



<!-- ✅ Önemli Uyarı -->
<div class="alert alert-danger text-center mt-3">
    <h4 class="alert-heading">⚠️ ÖNEMLİ UYARI!</h4>
    <p class="mb-0" style="font-size: 12px;">
        BU TABLO AİDAT KESİLMİŞ, VERGİ DÜŞÜLMÜŞ VE ORTALAMA HESAPLANMIŞ NET ÜCRETLERİ GÖSTERİR. NAFAKA ÖDEMESİ, İCRA KESİNTİSİ VE BES GİBİ ÖDEMELERİ İÇERMEMEKTEDİR. NET OLARAK KENDİ MAAŞINIZI HESAPLAMAK İÇİN LÜTFEN "KENDİ MAAŞIMI HESAPLA" BUTONUNA BASARAK İLGİLİ SAYFAYA GİDİNİZ.
    </p>
</div>
<div class="text-center">
    <a href="/GsbMaasHesaplama" class="btn btn-primary btn-large btn-block" class="hesapla">Kendi Maaşımı Hesapla</a>
</div>
<div class="text-center p-3">
        <p style="font-size:12px;">Bu hesaplamada yer alan bilgiler sadece genel bilgilendirme amaçlıdır ve Toleyis Sendikası, yetkilileri ve çalışanları tarafından profesyonel bağlamda herhangi bir tavsiye veya hizmet sunmayı amaçlamamakta ve bilgilerin doğruluğuna dair herhangi bir garanti vermemektedir. Toleyis Sendikası, yetkilileri ya da çalışanları bu hesaplamada yer alan bilgilerin üçüncü kişiler tarafından kullanılması sonucunda ortaya çıkabilecek zarar veya ziyandan sorumlu değildir.</p>
</div>

<!-- ✅ Pop-up Modal -->
<div class="modal fade" id="popupModal" tabindex="-1" aria-labelledby="popupModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Aydınlatma Metni</h5>
            </div>
            <div class="modal-body text-center">
                <p>
                    Bu hesaplamada yer alan bilgiler sadece genel bilgilendirme amaçlıdır ve Toleyis Sendikası, yetkilileri ve çalışanları tarafından profesyonel bağlamda herhangi bir tavsiye veya hizmet sunmayı amaçlamamakta ve bilgilerin doğruluğuna dair herhangi bir garanti vermemektedir.
                    Toleyis Sendikası, yetkilileri ya da çalışanları bu hesaplamada yer alan bilgilerin üçüncü kişiler tarafından kullanılması sonucunda ortaya çıkabilecek zarar veya ziyandan sorumlu değildir.
                </p>
                <label class="d-flex justify-content-center align-items-center">
                    <input type="checkbox" id="checkbox" />
                    <span class="ms-2">Okudum, Onaylıyorum.</span>
                </label>
            </div>
            <div class="modal-footer">
                <button id="tamamButton" disabled class="btn btn-primary w-100">Tamam</button>
            </div>
        </div>
    </div>
</div>

<!-- ✅ JS Kodları -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        var popupModal = new bootstrap.Modal(document.getElementById("popupModal"));
        var checkbox = document.getElementById("checkbox");
        var tamamButton = document.getElementById("tamamButton");

        // Kullanıcı daha önce onayladı mı kontrol et
        const popupOnaylandi = localStorage.getItem("popupOnaylandi");

        if (!popupOnaylandi) {
            popupModal.show();
        }

        checkbox.addEventListener("change", function () {
            tamamButton.disabled = !this.checked;
        });

        tamamButton.addEventListener("click", function () {
            popupModal.hide();
            localStorage.setItem("popupOnaylandi", true);
        });
    });
</script>
